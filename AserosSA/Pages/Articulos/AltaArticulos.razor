@page "/altaArticulo"
@page "/altaArticulo/{id:int}"
@inject IJSRuntime JsRuntime
@inject NavigationManager NavigationManager
@inject ModalService _modalService
@inject MessageService _message


<div class="rounded w-75 bg-light mx-auto" style="margin:15px;">
    <h3 class="text-center">Captura de Articulos</h3>
    <div class="row">
        <div class="col-md-1"></div>
        <div class="col-md-10">
            <table class="table">
                <tbody>
                    <tr>
                        <td>
                            <label>Clave de almacén: </label>
                            <input type="text" class="form-control" aria-label="">
                        </td>
                        <td colspan="2">
                            <label>Nombre del almacén:</label>
                            <input type="text" class="form-control" aria-label="" disabled>
                        </td>
                    </tr>
                    <tr>
                        <td class="rounded bg-info" colspan="8" style="color:white; background-color:aquamarine">
                            Datos Generales
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label>Clave de grupo: </label>
                            <input type="text" class="form-control" aria-label="">
                        </td>
                        <td colspan="2">
                            <label>Nombre: </label>
                            <input type="text" class="form-control" aria-label="" disabled>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label>Clave del articulo: </label>
                            <input type="text" class="form-control" aria-label="">
                        </td>
                        <td colspan="2">
                            <label>Descripción: </label>
                            <input type="text" class="form-control" aria-label="">
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3">
                            <label>Marca: </label>
                            <input type="text" class="form-control" aria-label="">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label>Clave de la ubicación: </label>
                            <input type="text" class="form-control" aria-label="">
                        </td>
                        <td colspan="2">
                            <label>Ubicación: </label>
                            <input type="text" class="form-control" aria-label="" disabled>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label>Clave de unidad: </label>
                            <input type="text" class="form-control" aria-label="">
                        </td>
                        <td colspan="2">
                            <label>Nombre de la unidad: </label>
                            <input type="text" class="form-control" aria-label="" disabled>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label>Máximo: </label>
                            <input type="text" class="form-control" aria-label="">
                        </td>
                        <td>
                            <label>Punto de Reorden: </label>
                            <input type="text" class="form-control" aria-label="">
                        </td>
                        <td>
                            <label>Minimo: </label>
                            <input type="text" class="form-control" aria-label="">
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="col-sm-11" style="text-align:right;">
            <Button Type="primary" @onclick="savedMessage">@saveValue</Button>
            <Button Type="default" @onclick="cancel" Danger>Cancelar</Button>
        </div>
    </div>
</div>

@code {
    [Parameter]
    public int id { get; set; }

    public String saveValue { get; set; }

    //VARIABLES DEL SELECTOR MULTIPLE
    List<string> _items;
    IEnumerable<string> _selectedValues1;
    private MarkupString bandera;

    protected override async Task OnInitializedAsync()
    {
        if (id != 0)
        {
            saveValue = "Editar";
        }
        else
        {
            saveValue = "Guardar";
        }

    }

    public async Task savedMessage()
    {
        if (id != 0)
            await JsRuntime.InvokeAsync<object>(identifier: "swal", "Editar", "Articulos Editada correctamente");
        else
            await JsRuntime.InvokeAsync<object>(identifier: "swal", "Guardar", "Articulo Guardada correctamente");

        NavigationManager.NavigateTo("/listaArticulos");
    }


    public async Task cancel()
    {
        //await JsRuntime.InvokeAsync<string>(identifier: "cancelSwal");
        var isTrue = await _modalService.ConfirmAsync(new ConfirmOptions()
        {
            Title = "Cancelar",
            Icon =@<Icon Type="exclamation-circle" Theme="Outline"></Icon>,
            Content = "Seguro que deseas cancelar",
            OkText = "Si",
            CancelText = "Cancelar"
        });

            if (isTrue)
            NavigationManager.NavigateTo("/listaArticulos");

    }
}

